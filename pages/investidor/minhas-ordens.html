<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Minhas Ordens - CrowdInvest</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="../../css/style.css">
</head>
<body class="theme-investidor">
  <div class="dashboard">
    <div class="mobile-header">
      <a href="dashboard.html" class="logo">Alba Invest</a>
    </div>

    <aside class="sidebar">
      <div class="sidebar-logo">
        <a href="dashboard.html" class="logo">Alba Invest</a>
      </div>
      <ul class="sidebar-menu">
        <li><a href="dashboard.html"><i class="bi bi-speedometer2"></i> Dashboard</a></li>
        <li><a href="ofertas.html"><i class="bi bi-megaphone"></i> Ofertas</a></li>
        <li><a href="minhas-ordens.html" class="active"><i class="bi bi-clock-history"></i> Minhas Ordens</a></li>
        <li><a href="carteira.html"><i class="bi bi-wallet2"></i> Minha Carteira</a></li>
        <li><a href="extrato.html"><i class="bi bi-list-ul"></i> Extrato</a></li>
        <li><a href="documentos.html"><i class="bi bi-folder"></i> Documentos</a></li>
        <li><a href="imposto-renda.html"><i class="bi bi-file-earmark-text"></i> Imposto de Renda</a></li>
        <li><a href="configuracoes.html"><i class="bi bi-gear"></i> Configurações</a></li>
        <li><a href="../login.html"><i class="bi bi-box-arrow-left"></i> Sair</a></li>
      </ul>
    </aside>
    <div class="mobile-overlay" onclick="closeMobileMenus()"></div>

    <main class="main-content">
      <button class="menu-toggle" onclick="toggleSidebar()"><i class="bi bi-list"></i><span> Menu</span></button>

      <div class="page-header">
        <div>
          <h1 class="page-title">Minhas Ordens</h1>
          <p class="text-muted">Acompanhe suas ordens de investimento</p>
        </div>
        <a href="ofertas.html" class="btn btn-primary btn-sm"><i class="bi bi-plus-lg"></i> Nova Ordem</a>
      </div>

      <!-- Tabs -->
      <div class="tabs-compact mb-15">
        <button class="tab-compact active" data-tab="ordensHoje" onclick="switchTab(this, 'ordensHoje')">
          <i class="bi bi-lightning"></i> Recentes (90 dias) <span class="badge-compact badge-warning" style="margin-left: 4px;">6</span>
        </button>
        <button class="tab-compact" data-tab="historico" onclick="switchTab(this, 'historico')">
          <i class="bi bi-clock-history"></i> Histórico Completo
        </button>
      </div>

      <!-- Tab: Ordens Recentes (últimos 90 dias) -->
      <div id="ordensHoje" class="tab-content">
        <!-- Resumo no Topo -->
        <div class="summary-top">
          <div class="summary-top-item">
            <span class="summary-top-label">Total em Ordens Ativas</span>
            <span class="summary-top-value">R$ 23.500</span>
          </div>
          <div class="summary-top-item">
            <span class="summary-top-label">Águardando PIX</span>
            <span class="summary-top-value" style="color: var(--warning);">R$ 2.000</span>
          </div>
          <div class="summary-top-item">
            <span class="summary-top-label">Em Processamento</span>
            <span class="summary-top-value" style="color: var(--info);">R$ 5.000</span>
          </div>
          <div class="summary-top-item">
            <span class="summary-top-label">Na Carteira</span>
            <span class="summary-top-value" style="color: var(--success);">R$ 13.500</span>
          </div>
        </div>

        <!-- Info Compacto -->
        <div class="alert alert-info mb-15" style="padding: 12px 16px; font-size: 0.85rem;">
          <i class="bi bi-info-circle"></i>
          <span>Mostrando ordens dos <strong>últimos 90 dias</strong>.</span>
          <br><small class="text-muted" style="margin-left: 20px;"><strong>Cancelar:</strong> ordens não pagas | <strong>Desistir:</strong> ordens pagas (5 dias úteis - RCVM 88)</small>
        </div>

        <!-- Filter Buttons -->
        <div class="filter-buttons mb-15">
          <button class="filter-btn active" data-filter="todas" onclick="filterOrders('todas', this)">
            Todas <span class="filter-count">6</span>
          </button>
          <button class="filter-btn" data-filter="aguardando" onclick="filterOrders('aguardando', this)">
            <i class="bi bi-qr-code"></i> Águardando PIX <span class="filter-count">1</span>
          </button>
          <button class="filter-btn" data-filter="processando" onclick="filterOrders('processando', this)">
            <i class="bi bi-arrow-repeat"></i> Processando <span class="filter-count">1</span>
          </button>
          <button class="filter-btn" data-filter="desistencia" onclick="filterOrders('desistencia', this)">
            <i class="bi bi-shield-exclamation"></i> Em Desistência <span class="filter-count">1</span>
          </button>
          <button class="filter-btn" data-filter="concluidas" onclick="filterOrders('concluidas', this)">
            <i class="bi bi-check-circle"></i> Concluidas <span class="filter-count">3</span>
          </button>
        </div>

        <!-- Lista de Ordens - Layout: Dados (esquerda) | Ações (direita) -->
        <div class="orders-list">
          <!-- Ordem 1: Águardando PIX -->
          <div class="order-row status-aguardando" data-status="aguardando">
            <div class="order-row-left">
              <div class="order-logo" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">FT</div>
              <div class="order-row-content">
                <div class="order-name">FinTech Solutions</div>
                <div class="order-meta">#ORD-00234 • Equity • Financas</div>
                <div class="order-details">
                  <div class="order-detail-item">
                    <span class="order-detail-label">Valor</span>
                    <span class="order-detail-value highlight">R$ 2.000</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Data</span>
                    <span class="order-detail-value">20/01/2026</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Expira PIX</span>
                    <span class="order-detail-value" style="color: var(--warning);"><i class="bi bi-clock"></i> 23:45:12</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Participação</span>
                    <span class="order-detail-value">0.33%</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="order-row-right">
              <span class="badge-compact badge-warning order-status-badge"><i class="bi bi-qr-code"></i> Águardando PIX</span>
              <div class="order-timeline">
                <div class="order-timeline-step done"></div>
                <div class="order-timeline-step active"></div>
                <div class="order-timeline-step"></div>
                <div class="order-timeline-step"></div>
              </div>
              <div class="order-actions">
                <a href="investir-pix.html" class="btn btn-primary btn-sm"><i class="bi bi-qr-code"></i> Pagar PIX</a>
                <button class="btn btn-cancel btn-sm" onclick="showModal('cancelarOrdemModal')"><i class="bi bi-x-lg"></i> Cancelar Ordem</button>
              </div>
            </div>
          </div>

          <!-- Ordem 2: Processando (PIX pago, aguardando confirmação) -->
          <div class="order-row status-processando" data-status="processando">
            <div class="order-row-left">
              <div class="order-logo" style="background: linear-gradient(135deg, var(--primary), var(--primary-dark));">TS</div>
              <div class="order-row-content">
                <div class="order-name">TechStart Inovação</div>
                <div class="order-meta">#ORD-00231 • Equity • Tecnologia</div>
                <div class="order-details">
                  <div class="order-detail-item">
                    <span class="order-detail-label">Valor</span>
                    <span class="order-detail-value highlight">R$ 5.000</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Data</span>
                    <span class="order-detail-value">20/01/2026</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">PIX pago</span>
                    <span class="order-detail-value" style="color: var(--success);"><i class="bi bi-check"></i> 14:32</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Participação</span>
                    <span class="order-detail-value">1.0%</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="order-row-right">
              <span class="badge-compact badge-info order-status-badge"><i class="bi bi-arrow-repeat"></i> Processando</span>
              <div class="order-timeline">
                <div class="order-timeline-step done"></div>
                <div class="order-timeline-step done"></div>
                <div class="order-timeline-step active"></div>
                <div class="order-timeline-step"></div>
              </div>
              <div class="order-actions">
                <span class="text-muted" style="font-size: 0.8rem;"><i class="bi bi-clock"></i> Confirmação em ~2h</span>
                <button class="btn btn-warning btn-sm" onclick="showModal('desistirProcessandoModal')" title="Desistir do investimento"><i class="bi bi-arrow-counterclockwise"></i> Desistir</button>
              </div>
            </div>
          </div>

          <!-- Ordem 3: Em Período de Desistência (PIX pago, dentro dos 5 dias) -->
          <div class="order-row status-desistencia" data-status="desistencia">
            <div class="order-row-left">
              <div class="order-logo" style="background: linear-gradient(135deg, #22c55e, #16a34a);">EF</div>
              <div class="order-row-content">
                <div class="order-name">EcoFood Organicos</div>
                <div class="order-meta">#ORD-00228 • Equity • Alimentação</div>
                <div class="order-details">
                  <div class="order-detail-item">
                    <span class="order-detail-label">Valor</span>
                    <span class="order-detail-value highlight">R$ 3.000</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Data</span>
                    <span class="order-detail-value">13/01/2026</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Prazo desistir</span>
                    <span class="order-detail-value" style="color: #ea580c;"><i class="bi bi-exclamation-triangle"></i> Até 15/01</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Participação</span>
                    <span class="order-detail-value">1.0%</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="order-row-right">
              <span class="badge-compact badge-warning order-status-badge"><i class="bi bi-shield-exclamation"></i> Em Desistência</span>
              <div class="order-timeline">
                <div class="order-timeline-step done"></div>
                <div class="order-timeline-step done"></div>
                <div class="order-timeline-step done"></div>
                <div class="order-timeline-step active"></div>
              </div>
              <div class="order-actions">
                <a href="investimento-detalhe.html" class="btn btn-outline btn-sm"><i class="bi bi-eye"></i> Detalhes</a>
                <button class="btn btn-warning btn-sm" onclick="showModal('desistirOrdemModal')"><i class="bi bi-arrow-counterclockwise"></i> Desistir</button>
              </div>
            </div>
          </div>

          <!-- Ordem 4: Concluida (fora do período de desistencia) -->
          <div class="order-row status-confirmado" data-status="concluidas">
            <div class="order-row-left">
              <div class="order-logo" style="background: linear-gradient(135deg, #ef4444, #dc2626);">HT</div>
              <div class="order-row-content">
                <div class="order-name">HealthTech Solutions</div>
                <div class="order-meta">#ORD-00225 • Equity • Saúde</div>
                <div class="order-details">
                  <div class="order-detail-item">
                    <span class="order-detail-label">Valor</span>
                    <span class="order-detail-value highlight">R$ 7.000</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Data</span>
                    <span class="order-detail-value">10/01/2026</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Confirmado</span>
                    <span class="order-detail-value" style="color: var(--success);">12/01/2026</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Participação</span>
                    <span class="order-detail-value">0.93%</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="order-row-right">
              <span class="badge-compact badge-success order-status-badge"><i class="bi bi-check-circle"></i> Na Carteira</span>
              <div class="order-timeline">
                <div class="order-timeline-step done"></div>
                <div class="order-timeline-step done"></div>
                <div class="order-timeline-step done"></div>
                <div class="order-timeline-step done"></div>
              </div>
              <div class="order-actions">
                <a href="carteira.html" class="btn btn-outline btn-sm"><i class="bi bi-wallet2"></i> Carteira</a>
                <a href="investimento-detalhe.html" class="btn btn-outline btn-sm"><i class="bi bi-eye"></i> Ver</a>
              </div>
            </div>
          </div>

          <!-- Ordem 5: Concluida -->
          <div class="order-row status-confirmado" data-status="concluidas">
            <div class="order-row-left">
              <div class="order-logo" style="background: linear-gradient(135deg, #0ea5e9, #0284c7);">PF</div>
              <div class="order-row-content">
                <div class="order-name">Resid. Parque das Flores</div>
                <div class="order-meta">#ORD-00220 • CRI • Imobiliario</div>
                <div class="order-details">
                  <div class="order-detail-item">
                    <span class="order-detail-label">Valor</span>
                    <span class="order-detail-value highlight">R$ 3.000</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Data</span>
                    <span class="order-detail-value">08/01/2026</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Taxa</span>
                    <span class="order-detail-value">IPCA+8%</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Vencimento</span>
                    <span class="order-detail-value">01/2029</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="order-row-right">
              <span class="badge-compact badge-success order-status-badge"><i class="bi bi-check-circle"></i> Na Carteira</span>
              <div class="order-timeline">
                <div class="order-timeline-step done"></div>
                <div class="order-timeline-step done"></div>
                <div class="order-timeline-step done"></div>
                <div class="order-timeline-step done"></div>
              </div>
              <div class="order-actions">
                <a href="carteira.html" class="btn btn-outline btn-sm"><i class="bi bi-wallet2"></i> Carteira</a>
                <a href="investimento-detalhe.html" class="btn btn-outline btn-sm"><i class="bi bi-eye"></i> Ver</a>
              </div>
            </div>
          </div>

          <!-- Ordem 6: Concluida -->
          <div class="order-row status-confirmado" data-status="concluidas">
            <div class="order-row-left">
              <div class="order-logo" style="background: linear-gradient(135deg, #84cc16, #65a30d);">AV</div>
              <div class="order-row-content">
                <div class="order-name">Cooperativa AgroVerde</div>
                <div class="order-meta">#ORD-00215 • CRA • Agronegócio</div>
                <div class="order-details">
                  <div class="order-detail-item">
                    <span class="order-detail-label">Valor</span>
                    <span class="order-detail-value highlight">R$ 3.500</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Data</span>
                    <span class="order-detail-value">05/01/2026</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Taxa</span>
                    <span class="order-detail-value">CDI+4,5%</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Vencimento</span>
                    <span class="order-detail-value">01/2028</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="order-row-right">
              <span class="badge-compact badge-success order-status-badge"><i class="bi bi-check-circle"></i> Na Carteira</span>
              <div class="order-timeline">
                <div class="order-timeline-step done"></div>
                <div class="order-timeline-step done"></div>
                <div class="order-timeline-step done"></div>
                <div class="order-timeline-step done"></div>
              </div>
              <div class="order-actions">
                <a href="carteira.html" class="btn btn-outline btn-sm"><i class="bi bi-wallet2"></i> Carteira</a>
                <a href="investimento-detalhe.html" class="btn btn-outline btn-sm"><i class="bi bi-eye"></i> Ver</a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Tab: Histórico -->
      <div id="historico" class="tab-content" style="display: none;">
        <!-- Filtros Compactos -->
        <div class="card mb-15" style="padding: 12px;">
          <div class="flex gap-10" style="flex-wrap: wrap; align-items: flex-end;">
            <div style="flex: 1; min-width: 100px;">
              <label class="form-label" style="font-size: 0.7rem; margin-bottom: 2px;">Status</label>
              <select class="form-input" style="padding: 6px 10px; font-size: 0.8rem;">
                <option>Todos</option>
                <option>Confirmados</option>
                <option>Cancelados</option>
                <option>Desistências</option>
              </select>
            </div>
            <div style="flex: 1; min-width: 120px;">
              <label class="form-label" style="font-size: 0.7rem; margin-bottom: 2px;">Período</label>
              <select class="form-input" style="padding: 6px 10px; font-size: 0.8rem;">
                <option value="30">Últimos 30 dias</option>
                <option value="60">Últimos 60 dias</option>
                <option value="90" selected>Últimos 90 dias</option>
                <option value="180">Últimos 6 meses</option>
                <option value="365">Último ano</option>
                <option value="all">Todo o período</option>
              </select>
            </div>
            <div style="flex: 2; min-width: 150px;">
              <label class="form-label" style="font-size: 0.7rem; margin-bottom: 2px;">Buscar</label>
              <input type="text" class="form-input" placeholder="Empresa ou ordem..." style="padding: 6px 10px; font-size: 0.8rem;">
            </div>
            <button class="btn btn-outline btn-sm" onclick="Modals.export('pdf', 'ordens')"><i class="bi bi-download"></i></button>
          </div>
        </div>

        <!-- KPIs Histórico -->
        <div class="kpi-grid-compact mb-15">
          <div class="kpi-card-compact"><div class="kpi-label-compact">Total</div><div class="kpi-value-compact">12</div></div>
          <div class="kpi-card-compact"><div class="kpi-label-compact">Confirmadas</div><div class="kpi-value-compact" style="color: var(--success);">8</div></div>
          <div class="kpi-card-compact"><div class="kpi-label-compact">Canceladas</div><div class="kpi-value-compact" style="color: var(--danger);">3</div></div>
          <div class="kpi-card-compact"><div class="kpi-label-compact">Expiradas</div><div class="kpi-value-compact" style="color: #6b7280;">1</div></div>
        </div>

        <!-- Histórico em Linhas - Layout: Dados (esquerda) | Ações (direita) -->
        <div class="orders-list">
          <div class="order-row status-confirmado">
            <div class="order-row-left">
              <div class="order-logo" style="background: linear-gradient(135deg, #ef4444, #dc2626);">HT</div>
              <div class="order-row-content">
                <div class="order-name">HealthTech Solutions</div>
                <div class="order-meta">#ORD-00150 • Equity • Saúde</div>
                <div class="order-details">
                  <div class="order-detail-item">
                    <span class="order-detail-label">Valor</span>
                    <span class="order-detail-value highlight">R$ 7.000</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Data</span>
                    <span class="order-detail-value">19/01/2026</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Status</span>
                    <span class="order-detail-value" style="color: var(--success);">Confirmado</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="order-row-right">
              <span class="badge-compact badge-success order-status-badge"><i class="bi bi-check"></i> Confirmado</span>
              <div class="order-actions">
                <a href="investimento-detalhe.html" class="btn btn-outline btn-sm"><i class="bi bi-eye"></i> Detalhes</a>
              </div>
            </div>
          </div>

          <div class="order-row status-confirmado">
            <div class="order-row-left">
              <div class="order-logo" style="background: linear-gradient(135deg, var(--primary), var(--primary-dark));">TS</div>
              <div class="order-row-content">
                <div class="order-name">TechStart Inovação</div>
                <div class="order-meta">#ORD-00142 • Equity • Tecnologia</div>
                <div class="order-details">
                  <div class="order-detail-item">
                    <span class="order-detail-label">Valor</span>
                    <span class="order-detail-value highlight">R$ 5.000</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Data</span>
                    <span class="order-detail-value">15/01/2026</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Status</span>
                    <span class="order-detail-value" style="color: var(--success);">Confirmado</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="order-row-right">
              <span class="badge-compact badge-success order-status-badge"><i class="bi bi-check"></i> Confirmado</span>
              <div class="order-actions">
                <a href="investimento-detalhe.html" class="btn btn-outline btn-sm"><i class="bi bi-eye"></i> Detalhes</a>
              </div>
            </div>
          </div>

          <div class="order-row status-confirmado">
            <div class="order-row-left">
              <div class="order-logo" style="background: linear-gradient(135deg, #0ea5e9, #0284c7);">PF</div>
              <div class="order-row-content">
                <div class="order-name">Resid. Parque das Flores</div>
                <div class="order-meta">#ORD-00135 • CRI • Imobiliario</div>
                <div class="order-details">
                  <div class="order-detail-item">
                    <span class="order-detail-label">Valor</span>
                    <span class="order-detail-value highlight">R$ 3.000</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Data</span>
                    <span class="order-detail-value">12/01/2026</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Status</span>
                    <span class="order-detail-value" style="color: var(--success);">Confirmado</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="order-row-right">
              <span class="badge-compact badge-success order-status-badge"><i class="bi bi-check"></i> Confirmado</span>
              <div class="order-actions">
                <a href="investimento-detalhe.html" class="btn btn-outline btn-sm"><i class="bi bi-eye"></i> Detalhes</a>
              </div>
            </div>
          </div>

          <div class="order-row status-cancelado" style="background: #fef2f2;">
            <div class="order-row-left">
              <div class="order-logo" style="background: linear-gradient(135deg, #22c55e, #16a34a);">GT</div>
              <div class="order-row-content">
                <div class="order-name">GreenTech Solar</div>
                <div class="order-meta">#ORD-00128 • CR • Energia</div>
                <div class="order-details">
                  <div class="order-detail-item">
                    <span class="order-detail-label">Valor</span>
                    <span class="order-detail-value" style="text-decoration: line-through; color: var(--text-muted);">R$ 1.500</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Data</span>
                    <span class="order-detail-value">10/01/2026</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Motivo</span>
                    <span class="order-detail-value" style="color: var(--danger);">Desistência</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Estorno</span>
                    <span class="order-detail-value" style="color: var(--success);">Creditado 14/01</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="order-row-right">
              <span class="badge-compact badge-danger order-status-badge"><i class="bi bi-x"></i> Desistência</span>
              <div class="order-actions">
                <button class="btn btn-outline btn-sm" onclick="showModal('detalheDesistenciaModal')"><i class="bi bi-eye"></i> Detalhes</button>
              </div>
            </div>
          </div>

          <div class="order-row status-confirmado">
            <div class="order-row-left">
              <div class="order-logo" style="background: linear-gradient(135deg, #84cc16, #65a30d);">AV</div>
              <div class="order-row-content">
                <div class="order-name">Cooperativa AgroVerde</div>
                <div class="order-meta">#ORD-00120 • CRA • Agronegócio</div>
                <div class="order-details">
                  <div class="order-detail-item">
                    <span class="order-detail-label">Valor</span>
                    <span class="order-detail-value highlight">R$ 3.500</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Data</span>
                    <span class="order-detail-value">08/01/2026</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Status</span>
                    <span class="order-detail-value" style="color: var(--success);">Confirmado</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="order-row-right">
              <span class="badge-compact badge-success order-status-badge"><i class="bi bi-check"></i> Confirmado</span>
              <div class="order-actions">
                <a href="investimento-detalhe.html" class="btn btn-outline btn-sm"><i class="bi bi-eye"></i> Detalhes</a>
              </div>
            </div>
          </div>

          <div class="order-row" style="background: #f9fafb;">
            <div class="order-row-left">
              <div class="order-logo" style="background: linear-gradient(135deg, #64748b, #475569);">SX</div>
              <div class="order-row-content">
                <div class="order-name">StartUp XYZ</div>
                <div class="order-meta">#ORD-00098 • Equity • Tecnologia</div>
                <div class="order-details">
                  <div class="order-detail-item">
                    <span class="order-detail-label">Valor</span>
                    <span class="order-detail-value" style="text-decoration: line-through; color: var(--text-muted);">R$ 2.000</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Data</span>
                    <span class="order-detail-value">20/12/2025</span>
                  </div>
                  <div class="order-detail-item">
                    <span class="order-detail-label">Motivo</span>
                    <span class="order-detail-value">PIX não realizado</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="order-row-right">
              <span class="badge-compact badge-secondary order-status-badge"><i class="bi bi-clock"></i> Expirado</span>
              <div class="order-actions">
                <button class="btn btn-outline btn-sm" onclick="showModal('detalheExpiradoModal')"><i class="bi bi-eye"></i> Detalhes</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Páginação Minimalista -->
        <div class="pagination-wrapper">
          <span class="pagination-info">Mostrando <strong>1-6</strong> de <strong>12</strong></span>
          <nav class="pagination-minimal">
            <button class="page-item nav-arrow disabled"><i class="bi bi-chevron-left"></i></button>
            <button class="page-item active">1</button>
            <button class="page-item">2</button>
            <button class="page-item nav-arrow"><i class="bi bi-chevron-right"></i></button>
          </nav>
        </div>
      </div>
      <!-- Disclaimer Regulatório CVM -->
      <div class="dashboard-disclaimer">
        <div class="cvm-badge"><i class="bi bi-shield-check"></i> Plataforma autorizada CVM - RCVM 88/2022</div>
        <p>ALBA PLATAFORMA DE INVESTIMENTOS ALTERNATIVOS LTDA (Alba Capital). CNPJ: 43.413.213/0001-58. Plataforma de investimentos alternativos autorizada pela Comissão de Valores Mobiliários (CVM) conforme Resolução RCVM 88/2022.</p><p style="font-size: 0.8rem; margin-top: 8px;"><i class="bi bi-envelope"></i> contato@albainvest.com.br | <i class="bi bi-whatsapp"></i> (11) 7380-9085</p>
        <div class="warning-text">
          <i class="bi bi-exclamation-triangle"></i>
          <span>Investimentos em startups e pequenas empresas envolvem riscos significativos, incluindo perda total do capital investido. Rentabilidade passada não garante rentabilidade futura. Leia atentamente o material da oferta antes de investir.</span>
        </div>
      </div>
    </main>
  </div>

  <!-- Modals Compactos -->

  <!-- Modal: Cancelar Ordem (PIX NAO PAGO) -->
  <div class="modal-overlay" id="cancelarOrdemModal" style="display: none;">
    <div class="modal" style="max-width: 420px;">
      <div class="modal-header" style="padding: 16px;">
        <h3 style="font-size: 1.1rem;"><i class="bi bi-x-circle" style="color: var(--secondary);"></i> Cancelar Ordem</h3>
        <button class="modal-close" onclick="hideModal('cancelarOrdemModal')">&times;</button>
      </div>
      <div style="padding: 0 16px 16px;">
        <div class="alert alert-info" style="padding: 10px; font-size: 0.85rem; margin-bottom: 12px;">
          <i class="bi bi-info-circle"></i>
          <div><strong>Ordem nao paga</strong> - sem custos para cancelar</div>
        </div>
        <p style="font-size: 0.95rem;">Cancelar ordem de <strong>R$ 2.000</strong> na <strong>FinTech Solutions</strong>?</p>
        <p class="text-muted" style="font-size: 0.85rem; margin-top: 10px;">A vaga será liberada para outros investidores. Você pode criar uma nova ordem a qualquer momento.</p>
        <div class="flex gap-10 mt-15">
          <button class="btn btn-outline btn-sm" onclick="hideModal('cancelarOrdemModal')" style="flex: 1;">Voltar</button>
          <button class="btn btn-cancel btn-sm" onclick="hideModal('cancelarOrdemModal'); showModal('ordemCanceladaModal');" style="flex: 1;"><i class="bi bi-x-lg"></i> Cancelar Ordem</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Desistir do Investimento (PIX JA PAGO - dentro de 5 dias) -->
  <div class="modal-overlay" id="desistirOrdemModal" style="display: none;">
    <div class="modal" style="max-width: 420px;">
      <div class="modal-header" style="padding: 16px;">
        <h3 style="font-size: 1.1rem;"><i class="bi bi-arrow-counterclockwise" style="color: var(--warning);"></i> Desistir do Investimento</h3>
        <button class="modal-close" onclick="hideModal('desistirOrdemModal')">&times;</button>
      </div>
      <div style="padding: 0 16px 16px;">
        <div class="alert alert-warning" style="padding: 10px; font-size: 0.85rem; margin-bottom: 12px;">
          <i class="bi bi-shield-check"></i>
          <div><strong>Direito garantido pela RCVM 88</strong> - voce pode desistir em ate 5 dias uteis apos o pagamento</div>
        </div>
        <p style="font-size: 0.95rem;">Desistir de <strong>R$ 3.000</strong> em <strong>EcoFood Organicos</strong>?</p>
        <div style="background: var(--bg); padding: 12px; border-radius: var(--radius-sm); margin-top: 12px; font-size: 0.85rem;">
          <div class="flex-between mb-8"><span class="text-muted">Valor investido:</span> <strong>R$ 3.000,00</strong></div>
          <div class="flex-between"><span class="text-muted">Estorno via PIX:</span> <strong style="color: var(--success);">até 5 dias úteis</strong></div>
        </div>
        <div class="flex gap-10 mt-15">
          <button class="btn btn-outline btn-sm" onclick="hideModal('desistirOrdemModal')" style="flex: 1;">Voltar</button>
          <a href="desistencia-confirmacao.html" class="btn btn-warning btn-sm" style="flex: 1;"><i class="bi bi-arrow-counterclockwise"></i> Confirmar Desistência</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Desistir durante processamento (PIX pago, ainda processando) -->
  <div class="modal-overlay" id="desistirProcessandoModal" style="display: none;">
    <div class="modal" style="max-width: 420px;">
      <div class="modal-header" style="padding: 16px;">
        <h3 style="font-size: 1.1rem;"><i class="bi bi-arrow-counterclockwise" style="color: var(--warning);"></i> Desistir do Investimento</h3>
        <button class="modal-close" onclick="hideModal('desistirProcessandoModal')">&times;</button>
      </div>
      <div style="padding: 0 16px 16px;">
        <div class="alert alert-info" style="padding: 10px; font-size: 0.85rem; margin-bottom: 12px;">
          <i class="bi bi-clock"></i>
          <div><strong>Ordem em processamento</strong> - aguarde a confirmacao para desistir</div>
        </div>
        <p style="font-size: 0.95rem;">A ordem de <strong>R$ 5.000</strong> em <strong>TechStart Inovação</strong> ainda está sendo processada.</p>
        <p class="text-muted" style="font-size: 0.85rem; margin-top: 10px;">Após confirmação, você tera <strong>5 dias úteis</strong> para exercer seu direito de desistencia (RCVM 88).</p>
        <div class="flex gap-10 mt-15">
          <button class="btn btn-primary btn-sm btn-block" onclick="hideModal('desistirProcessandoModal')">Entendi</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-overlay" id="ordemCanceladaModal" style="display: none;">
    <div class="modal text-center" style="max-width: 320px;">
      <div style="padding: 24px;">
        <i class="bi bi-check-circle" style="font-size: 2.5rem; color: var(--success);"></i>
        <h3 style="margin: 12px 0; font-size: 1rem;">Ordem Cancelada</h3>
        <p class="text-muted" style="font-size: 0.85rem;">Vaga liberada.</p>
        <button class="btn btn-primary btn-sm mt-15" onclick="hideModal('ordemCanceladaModal')">OK</button>
      </div>
    </div>
  </div>

  <div class="modal-overlay" id="exportandoModal" style="display: none;">
    <div class="modal text-center" style="max-width: 320px;">
      <div style="padding: 24px;">
        <i class="bi bi-file-earmark-arrow-down" style="font-size: 2.5rem; color: var(--success);"></i>
        <h3 style="margin: 12px 0; font-size: 1rem;">Exportando</h3>
        <p class="text-muted" style="font-size: 0.85rem;">Arquivo sendo gerado...</p>
        <button class="btn btn-primary btn-sm mt-15" onclick="hideModal('exportandoModal')">OK</button>
      </div>
    </div>
  </div>

  <div class="modal-overlay" id="detalheDesistenciaModal" style="display: none;">
    <div class="modal" style="max-width: 380px;">
      <div class="modal-header" style="padding: 16px;">
        <h3 style="font-size: 1rem;"><i class="bi bi-x-circle" style="color: var(--danger);"></i> Ordem Desistida</h3>
        <button class="modal-close" onclick="hideModal('detalheDesistenciaModal')">&times;</button>
      </div>
      <div style="padding: 0 16px 16px; font-size: 0.85rem;">
        <div class="flex-between mb-10"><span class="text-muted">Ordem:</span> <strong>#ORD-00128</strong></div>
        <div class="flex-between mb-10"><span class="text-muted">Empresa:</span> <strong>GreenTech Solar</strong></div>
        <div class="flex-between mb-10"><span class="text-muted">Valor:</span> <strong>R$ 1.500</strong></div>
        <div class="flex-between mb-10"><span class="text-muted">Desistência:</span> <strong>14/01/2026</strong></div>
        <div class="flex-between"><span class="text-muted">Estorno:</span> <span class="badge-compact badge-success">Creditado 16/01</span></div>
        <button class="btn btn-primary btn-sm btn-block mt-15" onclick="hideModal('detalheDesistenciaModal')">Fechar</button>
      </div>
    </div>
  </div>

  <div class="modal-overlay" id="detalheExpiradoModal" style="display: none;">
    <div class="modal" style="max-width: 380px;">
      <div class="modal-header" style="padding: 16px;">
        <h3 style="font-size: 1rem;"><i class="bi bi-clock" style="color: #6b7280;"></i> Ordem Expirada</h3>
        <button class="modal-close" onclick="hideModal('detalheExpiradoModal')">&times;</button>
      </div>
      <div style="padding: 0 16px 16px; font-size: 0.85rem;">
        <div class="flex-between mb-10"><span class="text-muted">Ordem:</span> <strong>#ORD-00098</strong></div>
        <div class="flex-between mb-10"><span class="text-muted">Empresa:</span> <strong>StartUp XYZ</strong></div>
        <div class="flex-between mb-10"><span class="text-muted">Valor:</span> <strong>R$ 2.000</strong></div>
        <div class="flex-between"><span class="text-muted">Motivo:</span> <strong>PIX não realizado em 24h</strong></div>
        <button class="btn btn-primary btn-sm btn-block mt-15" onclick="hideModal('detalheExpiradoModal')">Fechar</button>
      </div>
    </div>
  </div>

  <script src="../../js/app.js"></script>
  
  <script>
    // Função para trocar tabs - apenas uma ativa por vez
    function switchTab(btn, tabId) {
      // Remove active de todas as tabs do mesmo grupo
      const tabsContainer = btn.closest('.tabs-compact') || btn.closest('.tabs');
      if (tabsContainer) {
        tabsContainer.querySelectorAll('.tab-compact, .tab').forEach(t => t.classList.remove('active'));
      }
      btn.classList.add('active');

      // Esconde todo conteúdo de tab e mostra apenas o selecionado
      document.querySelectorAll('.tab-content').forEach(content => {
        content.style.display = 'none';
      });
      const targetTab = document.getElementById(tabId);
      if (targetTab) {
        targetTab.style.display = 'block';
      }
    }

    // Filter orders by status
    function filterOrders(status, btn) {
      // Updaté active button - apenas um ativo por vez
      const filterContainer = btn.closest('.filter-buttons');
      if (filterContainer) {
        filterContainer.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
      }
      btn.classList.add('active');

      // Filter rows
      document.querySelectorAll('.order-row[data-status]').forEach(row => {
        if (status === 'todas' || row.dataset.status === status) {
          row.style.display = 'flex';
        } else {
          row.style.display = 'none';
        }
      });
    }
  </script>
  <a href="https://wa.me/5511738090855" target="_blank" class="floating-help-btn whatsapp" title="Atendimento WhatsApp">
    <i class="bi bi-whatsapp"></i>
    <span>Atendimento</span>
  </a>

</body>
</html>
